#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
ç§»åŠ¨ç«¯UIä¼˜åŒ–æµ‹è¯•è„šæœ¬
"""

import os
import sys
import time
import webbrowser
import subprocess
from pathlib import Path

def test_mobile_features():
    """æµ‹è¯•ç§»åŠ¨ç«¯åŠŸèƒ½"""
    print("\nğŸ“± ç§»åŠ¨ç«¯UIä¼˜åŒ–åŠŸèƒ½æµ‹è¯•:")
    print("=" * 50)
    
    features = [
        "âœ… æ‚¬æµ®é¢„è§ˆæŒ‰é’® - å³ä¸‹è§’åœ†å½¢æŒ‰é’®",
        "âœ… å…¨å±é¢„è§ˆè¦†ç›–å±‚ - æ¯›ç»ç’ƒèƒŒæ™¯æ•ˆæœ",
        "âœ… è§¦æ‘¸æ‰‹åŠ¿æ”¯æŒ - ä¸‹æ‹‰å…³é—­é¢„è§ˆ",
        "âœ… å“åº”å¼å¸ƒå±€ - 768pxæ–­ç‚¹åˆ‡æ¢",
        "âœ… ç§»åŠ¨ç«¯ä¼˜åŒ–è¡¨å• - å‚ç›´å¸ƒå±€å’Œè§¦æ‘¸å‹å¥½",
        "âœ… é¢„è§ˆåŒæ­¥ - æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯é¢„è§ˆåŒæ­¥",
        "âœ… æŒ‰é’®çŠ¶æ€æŒ‡ç¤º - é¢„è§ˆæŒ‰é’®é¢œè‰²å˜åŒ–",
        "âœ… è§¦æ‘¸åŒºåŸŸä¼˜åŒ– - 44pxæœ€å°è§¦æ‘¸åŒºåŸŸ",
        "âœ… å­—ä½“å¤§å°ä¼˜åŒ– - 16pxé˜²æ­¢iOSç¼©æ”¾",
        "âœ… æ»šåŠ¨ä¼˜åŒ– - ä¸ºæ‚¬æµ®æŒ‰é’®é¢„ç•™ç©ºé—´",
        "âœ… åŠ¨ç”»æ•ˆæœ - å¹³æ»‘çš„æ‰“å¼€/å…³é—­åŠ¨ç”»",
        "âœ… é”®ç›˜é€‚é… - ç§»åŠ¨ç«¯é”®ç›˜å¼¹å‡ºé€‚é…"
    ]
    
    for feature in features:
        print(feature)
        time.sleep(0.1)

def start_web_server():
    """å¯åŠ¨WebæœåŠ¡å™¨"""
    print("ğŸš€ å¯åŠ¨WebæœåŠ¡å™¨...")
    
    try:
        process = subprocess.Popen([
            sys.executable, 'web_app.py'
        ], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
        
        time.sleep(3)
        return process
    except Exception as e:
        print(f"âŒ å¯åŠ¨æœåŠ¡å™¨å¤±è´¥: {e}")
        return None

def open_mobile_test():
    """æ‰“å¼€ç§»åŠ¨ç«¯æµ‹è¯•é¡µé¢"""
    print("\nğŸ“± ç§»åŠ¨ç«¯æµ‹è¯•æŒ‡å—:")
    print("=" * 50)
    print("1. ğŸŒ æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:4999")
    print("2. ğŸ“± æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·")
    print("3. ğŸ“² ç‚¹å‡»è®¾å¤‡æ¨¡æ‹ŸæŒ‰é’®ï¼ˆæ‰‹æœºå›¾æ ‡ï¼‰")
    print("4. ğŸ“ é€‰æ‹©ç§»åŠ¨è®¾å¤‡ï¼ˆå¦‚iPhone 12ï¼‰")
    print("5. ğŸ”„ åˆ·æ–°é¡µé¢æŸ¥çœ‹ç§»åŠ¨ç«¯å¸ƒå±€")
    print("\nğŸ“‹ æµ‹è¯•æ­¥éª¤:")
    print("1. âœ… æ£€æŸ¥æ‚¬æµ®é¢„è§ˆæŒ‰é’®æ˜¯å¦æ˜¾ç¤ºåœ¨å³ä¸‹è§’")
    print("2. âœ… ç‚¹å‡»æ‚¬æµ®æŒ‰é’®æ‰“å¼€é¢„è§ˆè¦†ç›–å±‚")
    print("3. âœ… å¡«å†™è¡¨å•å­—æ®µï¼Œè§‚å¯Ÿå®æ—¶é¢„è§ˆæ›´æ–°")
    print("4. âœ… æµ‹è¯•ä¸‹æ‹‰æ‰‹åŠ¿å…³é—­é¢„è§ˆ")
    print("5. âœ… æµ‹è¯•ä¸‹è½½é¢„è§ˆåŠŸèƒ½")
    print("6. âœ… æµ‹è¯•åˆ·æ–°é¢„è§ˆåŠŸèƒ½")
    print("7. âœ… è°ƒæ•´çª—å£å¤§å°æµ‹è¯•å“åº”å¼åˆ‡æ¢")

def main():
    """ä¸»å‡½æ•°"""
    print("ğŸ“± CRTicketSimulator ç§»åŠ¨ç«¯UIä¼˜åŒ–æµ‹è¯•")
    print("=" * 50)
    
    # æµ‹è¯•ç§»åŠ¨ç«¯åŠŸèƒ½
    test_mobile_features()
    
    # å¯åŠ¨æœåŠ¡å™¨
    process = start_web_server()
    if not process:
        return
    
    try:
        # æ˜¾ç¤ºæµ‹è¯•æŒ‡å—
        open_mobile_test()
        
        print("\nğŸ‰ ç§»åŠ¨ç«¯ä¼˜åŒ–æµ‹è¯•å‡†å¤‡å®Œæˆï¼")
        print("\nğŸ’¡ æŒ‰ Ctrl+C åœæ­¢æœåŠ¡å™¨")
        
        # ä¿æŒç¨‹åºè¿è¡Œ
        while True:
            time.sleep(1)
            
    except KeyboardInterrupt:
        print("\nğŸ‘‹ åœæ­¢æµ‹è¯•")
    finally:
        if process:
            process.terminate()
            print("ğŸ›‘ æœåŠ¡å™¨å·²åœæ­¢")

if __name__ == "__main__":
    main()
