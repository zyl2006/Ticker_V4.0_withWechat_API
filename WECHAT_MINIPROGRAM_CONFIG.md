# 微信小程序开发配置指南

## 解决域名限制问题

### 方案1：使用内网IP（已配置）
- API地址已修改为：`http://192.168.1.102:5001`
- 确保API服务器绑定到所有网络接口：`0.0.0.0:5001`

### 方案2：微信开发者工具设置
1. 打开微信开发者工具
2. 点击右上角"详情"
3. 在"本地设置"中：
   - ✅ 勾选"不校验合法域名、web-view（业务域名）、TLS 版本以及 HTTPS 证书"
   - ✅ 勾选"不校验合法域名"

### 方案3：小程序后台配置（生产环境）
1. 登录微信小程序后台
2. 进入"开发" -> "开发管理" -> "开发设置"
3. 在"服务器域名"中添加：
   - request合法域名：`https://your-domain.com`
   - 注意：必须是HTTPS协议

### 方案4：使用ngrok内网穿透（临时测试）
```bash
# 安装ngrok
npm install -g ngrok

# 启动内网穿透
ngrok http 5001

# 使用生成的HTTPS地址，如：https://abc123.ngrok.io
```

## 当前推荐配置
使用方案1+方案2的组合：
1. API地址使用内网IP：`http://192.168.1.102:5001`
2. 微信开发者工具中勾选"不校验合法域名"

## 验证步骤
1. 确保API服务器运行：`python api_server.py`
2. 在微信开发者工具中重新编译
3. 检查服务器状态是否显示为在线
4. 测试生成预览功能
