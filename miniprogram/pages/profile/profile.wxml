<!--pages/profile/profile.wxml-->
<!--ç”¨æˆ·ä¸­å¿ƒé¡µé¢ - ç”¨æˆ·ä¿¡æ¯å’Œå°ç¨‹åºä¿¡æ¯-->

<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card">
    <view class="user-avatar">
      <image 
        class="avatar-image" 
        src="{{userInfo.avatarUrl}}" 
        mode="aspectFill"
      />
    </view>
    
    <view class="user-info">
      <text class="user-name">{{userInfo.nickName}}</text>
      <text class="user-desc">è½¦ç¥¨åˆ¶ä½œçˆ±å¥½è€…</text>
    </view>
    
    <button
      wx:if="{{!hasUserInfo}}"
      class="btn btn-sm btn-primary"
      open-type="getUserInfo"
      bindgetuserinfo="getUserProfile"
    >
      <text>ç™»å½•</text>
    </button>
  </view>

  <!-- ç»Ÿè®¡æ•°æ® -->
  <view class="content">
    <view class="title">
      <text class="title-icon">ğŸ“Š</text>
      <text>æˆ‘çš„ç»Ÿè®¡</text>
    </view>
    
    <view class="stats-grid">
      <view class="stat-item">
        <text class="stat-number">{{stats.totalGenerated}}</text>
        <text class="stat-label">åˆ¶ä½œæ€»æ•°</text>
      </view>
      
      <view class="stat-item">
        <text class="stat-number">{{stats.favoriteStyle}}</text>
        <text class="stat-label">å¸¸ç”¨æ ·å¼</text>
      </view>
      
      <view class="stat-item">
        <text class="stat-number">{{stats.joinDate}}</text>
        <text class="stat-label">åŠ å…¥æ—¥æœŸ</text>
      </view>
    </view>
  </view>

  <!-- è®¾ç½®é€‰é¡¹ -->
  <view class="content">
    <view class="title">
      <text class="title-icon">âš™ï¸</text>
      <text>è®¾ç½®é€‰é¡¹</text>
    </view>
    
    <view class="settings-list">
      <view 
        wx:for="{{settings}}" 
        wx:key="key"
        class="setting-item"
      >
        <view class="setting-info">
          <text class="setting-title">{{item.title}}</text>
          <text class="setting-desc">{{item.desc}}</text>
        </view>
        
        <switch 
          wx:if="{{item.type === 'switch'}}"
          checked="{{item.value}}"
          data-key="{{item.key}}"
          data-value="{{!item.value}}"
          bindchange="onSettingChange"
        />
      </view>
    </view>
  </view>

  <!-- è´¦å·ç®¡ç† -->
  <view class="content" wx:if="{{hasUserInfo}}">
    <view class="title">
      <text class="title-icon">ğŸ‘¤</text>
      <text>è´¦å·ç®¡ç†</text>
    </view>

    <view class="action-list">
      <view class="action-item danger" bindtap="logout">
        <text class="action-icon">ğŸšª</text>
        <text class="action-title">ç™»å‡ºè´¦å·</text>
        <text class="action-arrow">></text>
      </view>
    </view>
  </view>

  <!-- åº”ç”¨ç®¡ç† -->
  <view class="content">
    <view class="title">
      <text class="title-icon">ğŸ”§</text>
      <text>åº”ç”¨ç®¡ç†</text>
    </view>

    <view class="action-list">
      <view class="action-item" bindtap="checkUpdate">
        <text class="action-icon">ğŸ”„</text>
        <text class="action-title">æ£€æŸ¥æ›´æ–°</text>
        <text class="action-arrow">></text>
      </view>

      <view class="action-item" bindtap="clearCache">
        <text class="action-icon">ğŸ—‘ï¸</text>
        <text class="action-title">æ¸…é™¤ç¼“å­˜</text>
        <text class="action-arrow">></text>
      </view>
      
      <view class="action-item" bindtap="feedback">
        <text class="action-icon">ğŸ’¬</text>
        <text class="action-title">æ„è§åé¦ˆ</text>
        <text class="action-arrow">></text>
      </view>
    </view>
  </view>

  <!-- å…³äºä¿¡æ¯ -->
  <view class="content">
    <view class="title">
      <text class="title-icon">â„¹ï¸</text>
      <text>å…³äºä¿¡æ¯</text>
    </view>
    
    <view class="about-list">
      <view class="about-item" bindtap="about">
        <text class="about-icon">ğŸ“±</text>
        <text class="about-title">å…³äºæˆ‘ä»¬</text>
        <text class="about-arrow">></text>
      </view>
      
      <view class="about-item" bindtap="privacy">
        <text class="about-icon">ğŸ”’</text>
        <text class="about-title">éšç§æ”¿ç­–</text>
        <text class="about-arrow">></text>
      </view>
      
      <view class="about-item" bindtap="terms">
        <text class="about-icon">ğŸ“‹</text>
        <text class="about-title">ä½¿ç”¨æ¡æ¬¾</text>
        <text class="about-arrow">></text>
      </view>
    </view>
    
    <view class="app-info">
      <text class="app-name">{{appInfo.name}}</text>
      <text class="app-version">ç‰ˆæœ¬ {{appInfo.version}}</text>
      <text class="app-developer">å¼€å‘è€…ï¼š{{appInfo.developer}}</text>
    </view>
  </view>
</view>